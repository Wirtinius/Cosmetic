{"ast":null,"code":"const useLogin = async (username, password) => {\n  // console.log('Submitting:', {\n  //     username,\n  //     password\n  // });\n\n  // console.log({ username, password })\n\n  // try {\n  //     const response = await fetch('http://localhost:3000/auth/login', {\n  //         method: 'POST',\n  //         body: { username, password },\n  //     });\n\n  //     if (!response.ok) {\n  //         throw new Error('Failed to login user');\n  //     }\n\n  //     console.log('User Login Successful');\n  //     return { success: true };\n\n  // } catch (error) {\n  //     console.error('Error during user login:', error);\n  // }\n\n  const login = async (username, password) => {\n    try {\n      const response = await fetch(`${apiUrl}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        }),\n        credentials: 'include' // cookies\n      });\n      if (!response.ok) {\n        throw new Error('Login failed');\n      }\n      const data = await response.json();\n      console.log(data);\n      setUser(data.user);\n      window.localStorage.setItem('accessToken', data.accessToken);\n      window.localStorage.setItem('refreshToken', data.refreshToken);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Login error:', error);\n    }\n  };\n};\nexport default useLogin;","map":{"version":3,"names":["useLogin","username","password","login","response","fetch","apiUrl","method","headers","body","JSON","stringify","credentials","ok","Error","data","json","console","log","setUser","user","window","localStorage","setItem","accessToken","refreshToken","success","error"],"sources":["/Users/alen/Desktop/freelance/cosmetic/Cosmetic-example/client/src/pages/User/Login/handler/loginHandler.jsx"],"sourcesContent":["const useLogin = async (username, password) => {\n    // console.log('Submitting:', {\n    //     username,\n    //     password\n    // });\n\n    // console.log({ username, password })\n\n    // try {\n    //     const response = await fetch('http://localhost:3000/auth/login', {\n    //         method: 'POST',\n    //         body: { username, password },\n    //     });\n\n    //     if (!response.ok) {\n    //         throw new Error('Failed to login user');\n    //     }\n\n    //     console.log('User Login Successful');\n    //     return { success: true };\n        \n    // } catch (error) {\n    //     console.error('Error during user login:', error);\n    // }\n\n\n    const login = async (username, password) => {\n        try {\n          const response = await fetch(`${apiUrl}/auth/login`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({ username, password }),\n            credentials: 'include', // cookies\n          });\n    \n          if (!response.ok) {\n            throw new Error('Login failed');\n          }\n    \n          const data = await response.json();\n          console.log(data)\n          setUser(data.user);\n          window.localStorage.setItem('accessToken', data.accessToken);\n          window.localStorage.setItem('refreshToken', data.refreshToken);\n          return { success: true };\n    \n        } catch (error) {\n          console.error('Login error:', error);\n        }\n      };\n};\n\nexport default useLogin;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,QAAQ,KAAK;EAC3C;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;;EAEA;EACA;EACA;;EAGA,MAAMC,KAAK,GAAG,MAAAA,CAAOF,QAAQ,EAAEC,QAAQ,KAAK;IACxC,IAAI;MACF,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,MAAO,aAAY,EAAE;QACnDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEV,QAAQ;UAAEC;QAAS,CAAC,CAAC;QAC5CU,WAAW,EAAE,SAAS,CAAE;MAC1B,CAAC,CAAC;MAEF,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;MACjC;MAEA,MAAMC,IAAI,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;MACjBI,OAAO,CAACJ,IAAI,CAACK,IAAI,CAAC;MAClBC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAER,IAAI,CAACS,WAAW,CAAC;MAC5DH,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAER,IAAI,CAACU,YAAY,CAAC;MAC9D,OAAO;QAAEC,OAAO,EAAE;MAAK,CAAC;IAE1B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdV,OAAO,CAACU,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;IACtC;EACF,CAAC;AACP,CAAC;AAED,eAAe3B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}